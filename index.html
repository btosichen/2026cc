<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è‘—ä½œåˆç†ä½¿ç”¨æŒ‘æˆ°è³½ V3</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
.fade{animation:fade .5s ease}
@keyframes fade{from{opacity:0;transform:translateY(20px)}to{opacity:1}}
.locked{pointer-events:none;opacity:.6}
.btn-press{transition:all .15s}
.btn-press:active{transform:translateY(3px) scale(.98)}
img.cc-icon{height:80px;object-fit:contain;margin:0 auto;}
</style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-100 via-sky-100 to-purple-200">
<div id="app"></div>

<script>
// ===== å…¨åŸŸè¨­å®š =====
const GAS_URL="https://script.google.com/macros/s/AKfycbyva0kqJmE1E1BEwwsjARpbbrRzjmdNDEndgqq0jfYXlQc1xz4L6_oj1K3ZsnbQpzd8/exec";
let score=0,time=0,index=0,locked=false,timer=null;

// ===== é¡Œåº«ï¼ˆåŠ å¯†ç­”æ¡ˆ + åŠåŠ å¯†ï¼‰ =====
const QUESTIONS=[
  // Level1 åŸºç¤åˆç†ä½¿ç”¨
  {q:"è½‰ç™¼ç›œç‰ˆå½±ç‰‡çµ¦åŒå­¸ï¼Œä½†æ²’æ”¶éŒ¢",a:"MQ=="},
  {q:"å¼•ç”¨æ–‡ç« æ‘˜è¦ä¸¦æ¨™ç¤ºå‡ºè™•",a:"MA=="},
  {q:"æ•´æœ¬æ›¸æƒæå‚³çµ¦æœ‹å‹",a:"MQ=="},
  {q:"æ•™å­¸å ±å‘Šåƒ…ä½¿ç”¨éƒ¨åˆ†åœ–ç‰‡ä¸¦è¨»æ˜ä¾†æº",a:"MA=="},
  {q:"æŠŠä»–äººInstagramè²¼æ–‡ç›´æ¥è½‰è²¼åˆ°ç¶²ç«™",a:"MQ=="},
  
  // å‰µç”¨CCåœ–ç¤ºè­˜åˆ¥
  {q:"ä»¥ä¸‹å“ªä¸€å€‹æ˜¯ã€Œå§“åæ¨™ç¤º (BY)ã€æˆæ¬Šï¼Ÿ<br><img class='cc-icon' src='https://tw.creativecommons.net/wp-content/uploads/sites/20/2020/11/by.png'>",a:"MA=="},
  {q:"é€™æ˜¯å“ªç¨®æˆæ¬Šï¼Ÿ<br><img class='cc-icon' src='https://tw.creativecommons.net/wp-content/uploads/sites/20/2020/11/by-nc.png'>",a:"MQ=="},
  {q:"é€™æ˜¯å“ªç¨®æˆæ¬Šï¼Ÿ<br><img class='cc-icon' src='https://tw.creativecommons.net/wp-content/uploads/sites/20/2020/11/by-sa.png'>",a:"MA=="},
  {q:"å“ªå€‹åœ–ç¤ºã€Œç¦æ­¢æ”¹ä½œã€ï¼Ÿ<br><img class='cc-icon' src='https://tw.creativecommons.net/wp-content/uploads/sites/20/2020/11/by-nd.png'>",a:"MQ=="},
  
  // Level2 åˆç†ä½¿ç”¨åˆ¤æ–·
  {q:"ç¿»è­¯æœªå…¬é–‹ä½œå“ä¸¦ä¸Šç¶²ç™¼å¸ƒ",a:"MQ=="},
  {q:"å¯«è§€å¾Œæ„Ÿå…¬é–‹ç™¼è¡¨ä¸¦åŠ è¨»å½±ç‰‡åç¨±",a:"MA=="},
  {q:"æƒæå°èªªPDFçµ¦åŒå­¸ç·´ç¿’",a:"MQ=="},
  {q:"ä¸Šèª²è©•è«–é›»å½±åŠ‡æƒ…é‡é»",a:"MA=="},
  
  // Level3 æˆæ¬Šçµ„åˆç†è§£
  {q:"BY-NC ä»£è¡¨å¯ä¿®æ”¹ & å¯å•†æ¥­ä½¿ç”¨ï¼Ÿ",a:"MQ=="},
  {q:"PD Mark å…¬çœ¾é ˜åŸŸæˆæ¬Šæ„å‘³è‘—ï¼Ÿ",a:"MA=="},
  {q:"BY-NC-SA å¿…é ˆç›¸åŒæ–¹å¼åˆ†äº«ï¼Ÿ",a:"MA=="},
  {q:"BY-NC-ND å¯å•†æ¥­ & ç¦æ­¢æ”¹ä½œï¼Ÿ",a:"MQ=="},
  
  // Level4 AI & è‘—ä½œæ¬Šçˆ­è­°
  {q:"AI æ¨¡ä»¿ç‰¹å®šé¢¨æ ¼ç”¨æ–¼é¦¬å…‹æ¯è²©å”®",a:"MQ=="},
  {q:"AI ç”Ÿæˆåœ–å¿…å®šæ²’æœ‰è‘—ä½œæ¬Šå•é¡Œ",a:"MQ=="},
];

// ===== è§£å¯†å‡½å¼ =====
function decode(s){
  return atob(s)==="0";
}

// ===== ç•«é¢æ¸²æŸ“ =====
function render(html){document.getElementById("app").innerHTML=html;}

// ===== é–‹å§‹é  =====
function showHome(){
render(`
<div class="flex items-center justify-center min-h-screen fade">
  <div class="bg-white p-8 rounded-3xl shadow-xl text-center w-96">
    <h1 class="text-3xl font-black text-indigo-600 mb-4">è‘—ä½œåˆç†ä½¿ç”¨æŒ‘æˆ°è³½</h1>
    <iframe class="w-full aspect-video mb-4" src="https://www.youtube.com/embed/9fuajCuCV4g"></iframe>
    <button onclick="startQuiz()" class="bg-orange-500 text-white px-6 py-3 rounded-xl font-bold btn-press">é–‹å§‹æŒ‘æˆ° ğŸš€</button>
  </div>
</div>
`);
}

// ===== é¡Œç›®é  =====
function showQuestion(){
if(index>=QUESTIONS.length){
  return finish();
}

locked=false;
let data=QUESTIONS[index];

render(`
<div class="p-8 fade">
<div class="bg-white p-6 rounded-2xl shadow-xl">
  <div class="flex justify-between mb-4 text-lg font-bold">
    <div>â± <span id="t">${time}</span>s</div>
    <div>ğŸ† ${score}</div>
  </div>
  <h2 class="text-xl mb-6">${data.q}</h2>
  <div class="flex justify-center gap-6">
    <button onclick="answer(true)" class="bg-blue-500 text-white px-8 py-3 rounded-xl btn-press">ç¬¦åˆ</button>
    <button onclick="answer(false)" class="bg-red-500 text-white px-8 py-3 rounded-xl btn-press">ä¸ç¬¦åˆ</button>
  </div>
</div>
</div>
`);
}

// ===== ä½œç­”è™•ç† =====
function answer(val){
  if(locked)return;
  locked=true;

  let correct = decode(QUESTIONS[index].a);

  if(val===correct){
    score += 5;
  }
  index++;
  setTimeout(showQuestion,900);
}

// ===== çµç®—é  =====
function finish(){
clearInterval(timer);

render(`
<div class="flex items-center justify-center min-h-screen fade">
  <div class="bg-white p-8 rounded-3xl shadow-xl text-center w-96">
    <h2 class="text-2xl font-black text-indigo-600 mb-4">å®ŒæˆæŒ‘æˆ° ğŸ‰</h2>
    <p class="text-xl font-bold mb-2">${score} åˆ†</p>
    <p class="mb-4">${time} ç§’</p>
    <button onclick="upload()" class="bg-blue-500 text-white px-6 py-3 rounded-xl btn-press">ä¸Šå‚³æˆç¸¾</button>
    <p class="text-sm text-slate-600 mt-4">åƒè€ƒè³‡æ–™ä¾†æºï¼š<br>
      <a href="https://tw.creativecommons.net/home-page/" class="underline text-blue-600">Creative Commons å°ç£ å®˜æ–¹</a>
    </p>
  </div>
</div>
`);
}

// ===== ä¸Šå‚³ =====
async function upload(){
let form=new URLSearchParams();
form.append("score",score);
form.append("time",time);

await fetch(GAS_URL,{
method:"POST",
mode:"no-cors",
headers:{'Content-Type':'application/x-www-form-urlencoded'},
body:form.toString()
});
alert("æˆç¸¾å·²ä¸Šå‚³ï¼");
}

// ===== è¨ˆæ™‚ =====
function startQuiz(){
score=time=index=0;
timer=setInterval(()=>{time++;document.getElementById("t")&&(document.getElementById("t").innerText=time)},1000);
showQuestion();
}

// ===== åˆå§‹åŒ– =====
showHome();
</script>
</body>
</html>
